"use strict";var g=Object.defineProperty,p=Object.defineProperties;var u=Object.getOwnPropertyDescriptors;var t=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable;var r=(n,e,o)=>e in n?g(n,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[e]=o,i=(n,e)=>{for(var o in e||(e={}))v.call(e,o)&&r(n,o,e[o]);if(t)for(var o of t(e))m.call(e,o)&&r(n,o,e[o]);return n},c=(n,e)=>p(n,u(e));var y=require("express"),C=require("http"),q=require("socket.io"),S=y(),a=C.createServer(S),d=q(a,{cors:{origin:"*"},autoConnect:!1}),l=process.env.PORT||3001,s={};d.on("connection",n=>{console.log(`Client ${n.id} connected`);let{playgroundId:e}=n.handshake.query;console.log("New Playground Id Connection: ",e),n.join(e),s[e]&&(console.log("Hey"),d.to(n.id).emit("serverUpdate",{nodes:s[e].nodes,edges:s[e].edges})),n.on("update",o=>{s=c(i({},s),{[e]:o}),console.log("Received Update From Client: ",e),n.broadcast.to(e).emit("serverUpdate",{nodes:o.nodes,edges:o.edges})}),n.on("disconnect",()=>{console.log(`Client ${n.id} disconnected`),n.leave(e)})});a.listen(l,()=>{console.log(`Server listening on port ${l}`)});
//# sourceMappingURL=index.js.map